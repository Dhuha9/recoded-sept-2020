<%- include('header', { title: 'Post' }); %>
<%- include('nav_bar', { id: null }); %>

<!-- Page Content -->
<div class="container py-3">
  <div class="row">
    <div class="col-lg-8 col-md-10 mx-auto">

      <div class="post-preview">
        <h2 class="post-title">
          <a data-postid="<%= post.id %>" id="thumbs_up_on" <% if (!post.liked) { %>style="display: none;" <% } %>><i
              class="fa fa-thumbs-up"></i></a>
          <a data-postid="<%= post.id %>" id="thumbs_up_off" <% if (post.liked) { %>style="display: none;" <% } %>><i
              class="fa fa-thumbs-up" style="color: #DDD;" id="thumbs_up_off"></i></a>
          <%= post.title %>
        </h2>

        <p class="post-meta">Posted by
          <a href="/users/profile/<%=post.user_id%>"><%= post.author %></a>
          on <%= post.date %></p>
        <p class="post-subtitle">
          <%= post.body %>
        </p>

        <button id="reply_button"
          class="btn btn-lg btn-primary btn-block btn-reply text-uppercase font-weight-bold mb-2">Reply</button>
        <textarea class="form-control" style="display: none;" id="post_reply" rows="5" required></textarea>
        <div class="btn_reply_actions">
          <button class="btn btn-lg btn-primary btn-block btn-reply text-uppercase font-weight-bold m-2"
            style="display: none;" type="submit" id="save_reply_button" data-postid="<%= post.id %>">
            Save
          </button>
          <a class=" btn btn-lg btn-primary btn-block btn-reply text-uppercase font-weight-bold m-2"
            style="display: none;" id="cancel_reply_button" href="<%= post.url %>">
            Cancel
          </a>
        </div>

        <div class="container py-3">
          <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
              <p class="font-weight-bold mb-4"> Replies </p>
              <% if (replies) { replies.forEach(function(reply){ %>
              <p><a href="/users/profile/<%=post.user_id%>"
                  class="font-weight-bold m-2"><%= reply.firstname + reply.lastname || reply.username %></a>
                <span class="font-sizeing"><%= reply.date %></span>

              </p>
              <p class="mx-4"><%= reply.content %> </p>
              <hr />
              <% })}; %>

            </div>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>

<%- include('footer', { javascript_uri: '/javascripts/view_post.js' }); %>